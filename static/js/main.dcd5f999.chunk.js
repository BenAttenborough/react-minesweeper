(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[,,,,,function(e,t,n){e.exports=n(14)},,,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),r=n(4),l=n.n(r),c=(n(11),n(1)),i=(n(12),n(13),function(e){var t=e.setGameOptions,n=Object(a.useState)("SQUARE"),r=Object(c.a)(n,2),l=r[0],i=r[1],u=Object(a.useState)(15),s=Object(c.a)(u,2),m=s[0],f=s[1],h=Object(a.useState)(15),v=Object(c.a)(h,2),b=v[0],g=v[1],p=Object(a.useState)(50),d=Object(c.a)(p,2),E=d[0],w=d[1];return Object(a.useEffect)(function(){}),o.a.createElement("div",{className:"panel"},o.a.createElement("form",{onSubmit:function(e){e.preventDefault(),t({gameType:l,height:m,width:b,numBombs:E})},className:"optForm"},o.a.createElement("div",{className:"optItem"},o.a.createElement("label",null,"Game type:"),o.a.createElement("select",{value:l,onChange:function(e){return i(e.target.value)}},o.a.createElement("option",{value:"SQUARE"},"Square"),o.a.createElement("option",{value:"HEX"},"Hex"))),o.a.createElement("div",{className:"optItem"},o.a.createElement("label",null,"Height:"),o.a.createElement("input",{type:"number",name:"height",id:"height",value:m,onChange:function(e){return f(parseInt(e.target.value))}})),o.a.createElement("div",{className:"optItem"},o.a.createElement("label",null,"Width:"),o.a.createElement("input",{type:"number",name:"width",id:"width",value:b,onChange:function(e){return g(parseInt(e.target.value))}})),o.a.createElement("div",{className:"optItem"},o.a.createElement("label",null,"Number of bombs:"),o.a.createElement("input",{type:"number",name:"numBombs",id:"numBombs",value:E,onChange:function(e){return w(e.target.value)}})),o.a.createElement("div",null,o.a.createElement("input",{type:"submit",value:"Play",className:"optSubmit"}))))});function u(e,t,n,a){return e<0||t<0?null:e>a-1||t>n-1?null:{row:e,col:t}}function s(e,t,n,a,o){var r=[u(e-1,t-1,n,a),u(e,t-1,n,a),u(e+1,t-1,n,a),u(e-1,t,n,a),u(e+1,t,n,a),u(e-1,t+1,n,a),u(e,t+1,n,a),u(e+1,t+1,n,a)];return"HEX"===o&&(r=(e+1)%2!==0?[u(e-1,t-1,n,a),u(e-1,t,n,a),u(e,t-1,n,a),u(e,t+1,n,a),u(e+1,t-1,n,a),u(e+1,t,n,a)]:[u(e-1,t+1,n,a),u(e-1,t,n,a),u(e,t-1,n,a),u(e,t+1,n,a),u(e+1,t+1,n,a),u(e+1,t,n,a)]),r.filter(function(e){return null!==e})}function m(e,t){var n=0;return e.forEach(function(e){t[e.row][e.col].bomb&&n++}),n}function f(e,t,n,a){var o=function(e,t,n,a){for(var o=[],r=[],l=0;l<t;l++){for(var c=0;c<e;c++){var i=l+c+l*(e-1),u=s(l,c,e,t,a);r.push({revealed:!1,bomb:n.includes(i),cellNum:i,flag:!1,row:l,col:c,adjCells:u,shape:new Path2D})}o.push(r),r=[]}return o}(e,t,function(e,t,n){var a=function(e,t){if(e>t)return[];if(e===t)return[e];for(var n=[];e<=t;e++)n.push(e);return n}(e,t);if(0===a.length)return console.warn("No numbers available to choose from"),a;if(a.length<=n)return console.warn("You have requested more random numbers than number available"),a;for(var o,r=[],l=0;l<n;l++){var c=(o=a.length,Math.floor(Math.random()*Math.floor(o)));r.push(a.splice(c,1)[0])}return r}(0,e*t,n),a);return o=function(e,t){for(var n=e.length,a=e[0].length,o=0;o<n;o++)for(var r=0;r<a;r++){var l=s(o,r,a,n,t);e[o][r].count=m(l,e)}return e}(o,a)}function h(e,t,n,a,o){var r=e-2;t.strokeStyle=n[0],t.beginPath(),t.moveTo(a,o),t.lineTo(r+a,o),t.stroke(),t.strokeStyle=n[1],t.beginPath(),t.moveTo(r+a,o),t.lineTo(r+a,r+o),t.stroke(),t.strokeStyle=n[2],t.beginPath(),t.moveTo(r+a,r+o),t.lineTo(a,r+o),t.stroke(),t.strokeStyle=n[3],t.beginPath(),t.moveTo(a,r+o),t.lineTo(a,o),t.stroke()}function v(e,t,n,a,o,r,l){var c,i=l.shape;switch(function(e,t,n,a,o,r,l){switch(t.fillStyle=n,e){case"SQUARE":b(a,o,r,l);break;case"HEX":!function(e,t,n,a){var o=a/2;e.moveTo(t+o,n),e.lineTo(t+a,n+o),e.lineTo(t+a,n+2*o),e.lineTo(t+o,n+3*o),e.lineTo(t,n+2*o),e.lineTo(t,n+o),e.closePath()}(a,o,r,l);break;default:b(a,o,r,l)}t.fill(a)}(e,t,r,i,a,o,n-2),e){case"HEX":c=o+3;break;default:c=o}!function(e,t,n,a,o,r){t.font="16px sans-serif";var l="black";switch(e.count){case 1:l="green";break;case 2:l="blue";break;case 3:l="yellow";break;case 4:l="red";break;default:l="black"}t.fillStyle=l,e.revealed?e.bomb?(t.fillStyle="red",t.fill(n)):e.count>0&&t.fillText(e.count,a+4,o+r-5):e.flag&&(t.fillStyle="black",t.fillText("F",a+4,o+r-5))}(l,t,i,a,c,n)}function b(e,t,n,a){e.moveTo(t,n),e.lineTo(a+t,n),e.lineTo(a+t,a+n),e.lineTo(t,a+n),e.closePath()}function g(e,t,n,a,o,r,l,c){v(e,t,n,a,o,r,c),function(e,t,n,a,o,r){switch(e){case"SQUARE":h(n,t,r,a,o);break;case"HEX":!function(e,t,n,a,o){var r=e-2,l=r/2;t.strokeStyle=n[0],t.beginPath(),t.moveTo(a+l,o),t.lineTo(a+r,o+l),t.stroke(),t.strokeStyle=n[1],t.beginPath(),t.lineTo(a+r,o+2*l),t.lineTo(a+l,o+3*l),t.lineTo(a,o+2*l),t.stroke(),t.strokeStyle=n[0],t.beginPath(),t.lineTo(a,o+l),t.stroke()}(n,t,r,a,o);break;default:h(n,t,r,a,o)}}(e,t,n,a,o,l)}var p=n(2);var d=function(e,t,n,a){t.bomb?function(e,t){var n=e.map(function(e){return e.map(function(e){return Object.assign({},Object(p.a)({},e,{revealed:!0}))})});t(n)}(e,n):function(e,t,n,a){var o=function(e,t,n){var a=[];return function t(n,o){var r=e[n][o];0===r.count?a.some(function(e){return e.row===n&&e.col===o})||(a.push({row:n,col:o}),r.adjCells.forEach(function(e){t(e.row,e.col)})):a.push({row:n,col:o})}(t,n),a}(e,t.row,t.col),r=e.map(function(e,t){return e.map(function(e,n){return o.some(function(e){return e.col===n&&e.row===t})?Object.assign({},Object(p.a)({},e,{revealed:!0})):Object.assign({},e)})});n(r)}(e,t,n)};function E(e,t,n){t.revealed||n(function(e,t,n){return t.map(function(t,a){return t.map(function(t,o){return e.row===a&&e.col===o?Object.assign({},Object(p.a)({},t,{flag:n})):Object.assign({},t)})})}(t,e,!t.flag))}function w(e,t,n,a,o,r,l,c){e.preventDefault();var i=n.current.getBoundingClientRect(),u=e.clientX-i.left,s=e.clientY-i.top,m=n.current.getContext("2d");o.forEach(function(e){e.forEach(function(e){m.isPointInPath(e.shape,u,s)&&("LEFT"!==t||e.flag||d(o,e,r,c.numBombs),"RIGHT"===t&&E(o,e,r))})})}function T(e){var t=e.gameOptions,n=e.setGameOptions,a=e.setBoard,r=e.cellsToReveal;return o.a.createElement("div",{className:"inGameUI"},o.a.createElement("button",{onClick:function(){!function(e,t){t(f(e.width,e.height,e.numBombs,e.gameType))}(t,a)},style:{marginRight:"1rem"}},"Reset"),o.a.createElement("button",{onClick:function(){n(null)}},"New Game"),o.a.createElement("p",null,"Cells to reveal: ",r))}function k(e){e.setGameRunning;var t=e.gameOptions,n=e.setGameOptions,r=0,l=0;switch(t.gameType){case"HEX":r+=t.width/2,l+=t.height/2;break;default:r=0,l=0}var i=f(t.width,t.height,t.numBombs,t.gameType),u=Object(a.useState)(i),s=Object(c.a)(u,2),m=s[0],h=s[1];var v=m[0].length,b=m.length,p=["#FFFFFF","#000000","#000000","#FFFFFF"],d=["#000000","#FFFFFF","#FFFFFF","#000000"],E=o.a.useRef(null),k=t.width*t.height,O=0;m.forEach(function(e){e.forEach(function(e){e.revealed&&O++})});var y=k-t.numBombs-O;return y<1&&(y=0),Object(a.useEffect)(function(){var e=function(e){return e.current.getContext("2d")}(E);!function(e,t,n,a,o,r,l,c,i){var u=e.gameType;n.forEach(function(e,n){return e.forEach(function(e,i){var s=0;"HEX"===u&&(s=n%2?a/2:0),g(u,t,a,a*i+s,a*n,e.revealed?r:o,e.revealed?c:l,e)})})}(t,e,m,20,"darkgray","lightgray",p,d)}),o.a.createElement("div",null,o.a.createElement(T,{gameOptions:t,setGameOptions:n,setBoard:h,cellsToReveal:y}),o.a.createElement("canvas",{ref:E,width:20*v+r,height:20*b+l,className:"board",onClick:function(e){w(e,"LEFT",E,0,m,h,0,t)},onContextMenu:function(e){w(e,"RIGHT",E,0,m,h)}}))}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(o.a.createElement(function(){var e=Object(a.useState)(null),t=Object(c.a)(e,2),n=t[0],r=t[1];return o.a.createElement("div",{className:"App"},o.a.createElement("h1",null,"Polysweeper"),n?o.a.createElement(k,{gameOptions:n,setGameOptions:r}):o.a.createElement(i,{setGameOptions:r}))},null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}],[[5,1,2]]]);
//# sourceMappingURL=main.dcd5f999.chunk.js.map